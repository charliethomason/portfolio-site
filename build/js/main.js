var charlie=charlie||{};charlie.basics=function(){function hamburger(){$("#hamburger").click(function(e){e.preventDefault(),$("#main-nav ul").toggleClass("shown")})}function init(){hamburger()}init()},charlie.gallery=function(){function clickEvents(){$(".sort-method a").click(function(e){e.preventDefault(),gallerySort(this)})}function gallerySort(link){if(!$(link).hasClass("active")){var method=$(link).attr("id"),$imgLi=$grid.children("li.img-li");$sort.find(".active").removeClass("active"),$(link).addClass("active"),$imgLi.sort(function(a,b){switch(method){case"sort-title":var an=$(a).find(".title").text();bn=$(b).find(".title").text();break;case"sort-newest":var bn=a.getAttribute("data-year"),an=b.getAttribute("data-year");break;case"sort-oldest":var an=a.getAttribute("data-year"),bn=b.getAttribute("data-year")}return an>bn?1:bn>an?-1:0}),$imgLi.detach().appendTo($grid)}}function init(){clickEvents()}var $lightbox=$(".lightbox");$lightbox.find(".lightbox-content");$lightboxImg=$lightbox.find(".lightbox-img img"),$lightboxTitle=$("h1"),defaultTitle=$lightboxTitle.text(),$lightboxYear=$lightbox.find(".lightbox-year"),$lightboxMedium=$lightbox.find(".lightbox-medium"),$lightboxDescription=$lightbox.find(".lightbox-description"),$lightboxLocationWrap=$lightbox.find(".lightbox-location-wrap"),$lightboxLocation=$lightboxLocationWrap.find(".lightbox-location"),$loading=$(".lightbox-loading"),$sort=$(".sort-method"),$grid=$(".grid"),monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],init()},charlie.galleryPage=function(){function clickEvents(){$(".img-inpage").click(function(e){e.preventDefault(),toggleLightbox(this)}),$(".img-inpage h2").click(function(e){e.preventDefault(),e.stopPropagation()}),$(".img-close").click(function(e){e.preventDefault(),e.stopPropagation(),toggleLightbox($(this).parents(".img-section").find(".img-inpage"))}),$(".img-prev").click(function(e){e.preventDefault(),e.stopPropagation(),loadPrevImg($(this).parents(".img-section").find(".img-inpage"))}),$(".img-next").click(function(e){e.preventDefault(),e.stopPropagation(),loadNextImg($(this).parents(".img-section").find(".img-inpage"))}),$(".trigger-lightbox").click(function(e){e.preventDefault(),toggleLightbox($(".img-inpage:first"))})}function toggleLightbox(target){$(target).toggleClass("fixed-lightbox")}function loadPrevImg($current){var $prev=$current.parent(".img-section").prev(".img-section").find(".img-inpage");if($current.removeClass("fixed-lightbox"),$prev.length)$prev.addClass("fixed-lightbox");else{var $last=$(".img-inpage:last");$last.addClass("fixed-lightbox")}}function loadNextImg($current){var $next=$current.parent(".img-section").next(".img-section").find(".img-inpage");if($current.removeClass("fixed-lightbox"),$next.length)$next.addClass("fixed-lightbox");else{var $first=$(".img-inpage:first");$first.addClass("fixed-lightbox")}}function keyboardNav(){$(document).keydown(function(e){if($(".fixed-lightbox").length){var $current=$(".img-inpage.fixed-lightbox");27==e.keyCode&&(e.preventDefault(),toggleLightbox($current)),37==e.keyCode&&(e.preventDefault(),loadPrevImg($current)),39==e.keyCode&&(e.preventDefault(),loadNextImg($current))}})}function init(){clickEvents(),keyboardNav()}init()},$(document).ready(function(){charlie.basics(),$(".gallery").length&&charlie.gallery(),$(".gallery-page").length&&charlie.galleryPage()});