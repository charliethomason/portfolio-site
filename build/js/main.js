var charlie=charlie||{};charlie.basics=function(){function hamburger(){$("#hamburger").click(function(e){e.preventDefault(),$("#main-nav ul").toggleClass("shown")})}function init(){hamburger()}init()},charlie.gallery=function(){function filters(){$("#gallery-filter").submit(function(e){e.preventDefault();var $filterSelect=$(this).find(".filters"),$selected=$filterSelect.find(":selected"),filter=$selected.val();$(".img-li").each(function(){var filters=$(this).attr("data-filters");"all"==filter?$(this).show():filters.indexOf(filter)>-1?$(this).show():$(this).hide()})})}function galleryView(){if(charlie.storageSupport()===!0&&sessionStorage.getItem("gallery-view")){var viewType=sessionStorage.getItem("gallery-view");$(".gallery-wrap").removeClass("list grid").addClass(viewType),$('input[name="view"][value="'+viewType+'"]').prop("checked",!0)}$('input[name="view"]').change(function(){"grid"==this.value?($(".gallery-wrap").removeClass("list").addClass("grid"),charlie.storageSupport()===!0&&sessionStorage.setItem("gallery-view","grid")):"list"==this.value&&($(".gallery-wrap").removeClass("grid").addClass("list"),charlie.storageSupport()===!0&&sessionStorage.setItem("gallery-view","list"))})}function init(){filters(),galleryView()}init()},charlie.galleryPage=function(){function clickEvents(){$(".img-inpage").click(function(e){e.preventDefault(),toggleLightbox(this)}),$(".img-inpage h2").click(function(e){e.preventDefault(),e.stopPropagation()}),$(".img-close").click(function(e){e.preventDefault(),e.stopPropagation(),toggleLightbox($(this).parents(".img-section").find(".img-inpage"))}),$(".img-prev").click(function(e){e.preventDefault(),e.stopPropagation(),loadPrevImg($(this).parents(".img-section").find(".img-inpage"))}),$(".img-next").click(function(e){e.preventDefault(),e.stopPropagation(),loadNextImg($(this).parents(".img-section").find(".img-inpage"))}),$(".trigger-lightbox").click(function(e){e.preventDefault(),toggleLightbox($(".img-inpage:first"))})}function toggleLightbox(target){$(target).toggleClass("fixed-lightbox")}function loadPrevImg($current){var $prev=$current.parent(".img-section").prev(".img-section").find(".img-inpage");if($current.removeClass("fixed-lightbox"),$prev.length)$prev.addClass("fixed-lightbox");else{var $last=$(".img-inpage:last");$last.addClass("fixed-lightbox")}}function loadNextImg($current){var $next=$current.parent(".img-section").next(".img-section").find(".img-inpage");if($current.removeClass("fixed-lightbox"),$next.length)$next.addClass("fixed-lightbox");else{var $first=$(".img-inpage:first");$first.addClass("fixed-lightbox")}}function keyboardNav(){$(document).keydown(function(e){if($(".fixed-lightbox").length){var $current=$(".img-inpage.fixed-lightbox");27==e.keyCode&&(e.preventDefault(),toggleLightbox($current)),37==e.keyCode&&(e.preventDefault(),loadPrevImg($current)),39==e.keyCode&&(e.preventDefault(),loadNextImg($current))}})}function init(){clickEvents(),keyboardNav()}init()},charlie.birdGallery=function(){function slideCreate(){$hider.show(),$wrap.removeClass("bird-list").addClass("bird-slideshow"),$(".img-section").removeClass("section"),$(".img-section:first-child").addClass("section-active")}function slideDestroy(){$hider.hide(),$wrap.removeClass("bird-slideshow").addClass("bird-list")}function galleryView(){if(1==charlie.storageSupport()&&sessionStorage.getItem("bird-gallery")){var viewType=sessionStorage.getItem("bird-gallery");$('input[name="view"][value="'+viewType+'"]').prop("checked",!0),"slideshow"==viewType?slideCreate():"list"==viewType&&slideDestroy()}else $wrap.hasClass("bird-slideshow")&&slideCreate();$('input[name="view"]').change(function(){"slideshow"==this.value?(slideCreate(),charlie.storageSupport()===!0&&sessionStorage.setItem("bird-gallery","slideshow")):"list"==this.value&&(slideDestroy(),charlie.storageSupport()===!0&&sessionStorage.setItem("bird-gallery","list"))})}function clickEvents(){$(".img-inpage").click(function(e){$wrap.hasClass("bird-list")&&(e.preventDefault(),toggleLightbox(this))}),$(".img-close").click(function(e){$wrap.hasClass("bird-list")&&(e.preventDefault(),e.stopPropagation(),toggleLightbox($(this).parents(".img-section").find(".img-inpage")))}),$(".img-info").click(function(e){$wrap.hasClass("bird-slideshow")&&(e.preventDefault(),e.stopPropagation(),$(this).toggleClass("show-info"))}),$hider.click(function(e){e.preventDefault(),e.stopPropagation(),$('input[name="view"][value="list"]').prop("checked",!0),charlie.storageSupport()===!0&&sessionStorage.setItem("bird-gallery","list"),$(".img-section").removeClass("section-active"),slideDestroy()}),$(".img-section").on("swipeleft click",function(e){nextBird(this)}).on("swiperight",function(e){prevBird(this)})}function nextBird(bird){$(bird).removeClass("section-active"),$(bird).is(":last-child")?$(".img-section:first-child").addClass("section-active"):$(bird).next(".img-section").addClass("section-active")}function prevBird(bird){$(bird).removeClass("section-active"),$(bird).is(":first-child")?$(".img-section:last-child").addClass("section-active"):$(bird).prev(".img-section").addClass("section-active")}function toggleLightbox(target){$(target).toggleClass("fixed-lightbox")}function init(){galleryView(),clickEvents()}var $wrap=$(".gallery-page"),$hider=$("#hide-slideshow");init()},charlie.storageSupport=function(){var test="test";try{return sessionStorage.setItem(test,test),sessionStorage.removeItem(test),!0}catch(e){return!1}},$(document).ready(function(){charlie.basics(),$(".gallery").length&&charlie.gallery(),$(".gallery-page").length&&($(".birds-wrap").length?charlie.birdGallery():charlie.galleryPage())});