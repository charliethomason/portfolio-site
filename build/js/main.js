var charlie=charlie||{};charlie.basics=function(){function hamburger(){$("#hamburger").click(function(e){e.preventDefault(),$("#main-nav ul").toggleClass("shown")})}function init(){hamburger()}init()},charlie.gallery=function(){function filters(){$("#gallery-filter").submit(function(e){e.preventDefault();var $filterSelect=$(this).find(".filters"),$selected=$filterSelect.find(":selected"),filter=$selected.val();$(".img-li").each(function(){var filters=$(this).attr("data-filters");"all"==filter?$(this).show():filters.indexOf(filter)>-1?$(this).show():$(this).hide()})})}function galleryView(){if(charlie.storageSupport()===!0&&sessionStorage.getItem("gallery-view")){var viewType=sessionStorage.getItem("gallery-view");$(".gallery-wrap").removeClass("list grid").addClass(viewType),$('input[name="view"][value="'+viewType+'"]').prop("checked",!0)}$('input[name="view"]').change(function(){"grid"==this.value?($(".gallery-wrap").removeClass("list").addClass("grid"),charlie.storageSupport()===!0&&sessionStorage.setItem("gallery-view","grid")):"list"==this.value&&($(".gallery-wrap").removeClass("grid").addClass("list"),charlie.storageSupport()===!0&&sessionStorage.setItem("gallery-view","list"))})}function init(){filters(),galleryView()}init()},charlie.galleryPage=function(){function clickEvents(){$(".img-inpage").click(function(e){e.preventDefault(),toggleLightbox(this)}),$(".img-inpage h2").click(function(e){e.preventDefault(),e.stopPropagation()}),$(".img-close").click(function(e){e.preventDefault(),e.stopPropagation(),toggleLightbox($(this).parents(".img-section").find(".img-inpage"))}),$(".img-prev").click(function(e){e.preventDefault(),e.stopPropagation(),loadPrevImg($(this).parents(".img-section").find(".img-inpage"))}),$(".img-next").click(function(e){e.preventDefault(),e.stopPropagation(),loadNextImg($(this).parents(".img-section").find(".img-inpage"))}),$(".trigger-lightbox").click(function(e){e.preventDefault(),toggleLightbox($(".img-inpage:first"))})}function toggleLightbox(target){$(target).toggleClass("fixed-lightbox")}function loadPrevImg($current){var $prev=$current.parent(".img-section").prev(".img-section").find(".img-inpage");if($current.removeClass("fixed-lightbox"),$prev.length)$prev.addClass("fixed-lightbox");else{var $last=$(".img-inpage:last");$last.addClass("fixed-lightbox")}}function loadNextImg($current){var $next=$current.parent(".img-section").next(".img-section").find(".img-inpage");if($current.removeClass("fixed-lightbox"),$next.length)$next.addClass("fixed-lightbox");else{var $first=$(".img-inpage:first");$first.addClass("fixed-lightbox")}}function keyboardNav(){$(document).keydown(function(e){if($(".fixed-lightbox").length){var $current=$(".img-inpage.fixed-lightbox");27==e.keyCode&&(e.preventDefault(),toggleLightbox($current)),37==e.keyCode&&(e.preventDefault(),loadPrevImg($current)),39==e.keyCode&&(e.preventDefault(),loadNextImg($current))}})}function init(){clickEvents(),keyboardNav()}init()},charlie.birdGallery=function(){function slideCreate(bird){$controls.show(),$wrap.removeClass("bird-list").addClass("bird-slideshow"),$(".img-section").removeClass("section-active").hide(),bird?$(bird).parents(".img-section").addClass("section-active").show():$(".img-section:first-child").addClass("section-active").show()}function slideDestroy(){$controls.hide(),$(".img-section").removeClass("section-active").hide(),$wrap.removeClass("bird-slideshow").addClass("bird-list")}function clickEvents(){$(".img-inpage").click(function(e){$wrap.hasClass("bird-list")&&slideCreate(this)}),$("#show-slideshow").click(function(e){e.preventDefault(),slideCreate()}),$("#hide-slideshow").click(function(e){e.preventDefault(),e.stopPropagation(),slideDestroy()})}function keyboardNav(){$(document).keydown(function(e){$wrap.hasClass("bird-slideshow")&&27==e.keyCode&&(e.preventDefault(),slideDestroy())})}function init(){clickEvents(),keyboardNav()}var $wrap=$(".gallery-page"),$controls=$(".slide-controls");init()},charlie.storageSupport=function(){var test="test";try{return sessionStorage.setItem(test,test),sessionStorage.removeItem(test),!0}catch(e){return!1}},$(document).ready(function(){charlie.basics(),$(".gallery").length&&charlie.gallery(),$(".gallery-page").length&&($(".birds-wrap").length?charlie.birdGallery():charlie.galleryPage())});